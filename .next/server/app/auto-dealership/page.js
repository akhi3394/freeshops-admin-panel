(()=>{var e={};e.id=792,e.ids=[792],e.modules={2554:(e,i,r)=>{Promise.resolve().then(r.bind(r,60251))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7057:(e,i,r)=>{"use strict";r.r(i),r.d(i,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(65239),s=r(48088),o=r(88170),n=r.n(o),a=r(30893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(i,l);let d={children:["",{children:["auto-dealership",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60251)),"/home/akhil/freeshipps-admin-panel/app/auto-dealership/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/akhil/freeshipps-admin-panel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/akhil/freeshipps-admin-panel/app/auto-dealership/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/auto-dealership/page",pathname:"/auto-dealership",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15801:(e,i,r)=>{"use strict";r.d(i,{A:()=>n});var t=r(60687);r(43210);var s=r(88931),o=r(66803);let n=()=>(0,t.jsx)(s.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:1300},children:(0,t.jsx)(o.A,{sx:{color:"#FF5722"}})})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40035:(e,i,r)=>{"use strict";r.d(i,{d:()=>s});var t=r(43210);let s=(e,i)=>{let[r,s]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let r=setTimeout(()=>{s(e)},i);return()=>{clearTimeout(r)}},[e,i]),r}},42722:(e,i,r)=>{Promise.resolve().then(r.bind(r,61941))},46055:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>s});var t=r(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},60251:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/akhil/freeshipps-admin-panel/app/auto-dealership/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/akhil/freeshipps-admin-panel/app/auto-dealership/page.tsx","default")},61941:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>I});var t=r(60687),s=r(76180),o=r.n(s),n=r(43210),a=r(76897),l=r(72132),d=r(88931),c=r(87088),p=r(16184),x=r(83685),h=r(86562),u=r(30076),f=r(72318),m=r(91433),g=r(37204),b=r(24296),j=r(90764),A=r(63646),k=r(27674),v=r(97887),C=r(43323),w=r(55581),y=r(16189),S=r(73278),_=r(15801),R=r(40035);let I=()=>{let{searchTerm:e}=(0,w.useSearch)();console.log(e,"searchTerm");let i=(0,y.usePathname)(),[r,s]=(0,n.useState)(0),[I,P]=(0,n.useState)(10),[F,N]=(0,n.useState)([]),[M,D]=(0,n.useState)(!1),[W,z]=(0,n.useState)(!1),[E,O]=(0,n.useState)(null),[q,B]=(0,n.useState)({name:"",description:"",image:null}),[G,L]=(0,n.useState)({name:"",description:"",image:null}),[T,U]=(0,n.useState)(null),[H,X]=(0,n.useState)(null),[J,K]=(0,n.useState)(!1),[Q,V]=(0,n.useState)(null),[Y,Z]=(0,n.useState)(!1),$=(0,R.d)(e,500),{data:ee,isLoading:ei,error:er,refetch:et,isFetching:es}=(0,S.Nn)({search:$,page:r+1,limit:I},{refetchOnMountOrArgChange:!0}),[eo,{isLoading:en,error:ea}]=(0,S.QJ)(),[el,{isLoading:ed,error:ec}]=(0,S._m)(),ep=ee?.data||[];ee?.data?.totalDocs,console.log(ep,"dealerships"),(0,n.useEffect)(()=>()=>{s(0),N([])},[i]),(0,n.useEffect)(()=>{et()},[$,et]),(0,n.useEffect)(()=>{if(E&&ep){let e=ep.find(e=>e._id===E);e&&(L({name:e.name||"",description:e.description||"",image:null}),Z(!1),z(!0),console.log("Dealership data fetched, opening Edit form"))}},[E,ep]);let ex=e=>{let{name:i,value:r,files:t}=e.target;"image"===i&&t?B({...q,image:t[0]}):B({...q,[i]:r})},eh=e=>{let{name:i,value:r,files:t}=e.target;"image"===i&&t?L({...G,image:t[0]}):L({...G,[i]:r})},eu=async()=>{if(!q.name||!q.description||!q.image)return void U("All fields are required");try{await eo({name:q.name,description:q.description,image:q.image}).unwrap(),D(!1),B({name:"",description:"",image:null}),U(null)}catch(e){U(e?.data?.message||"Failed to create dealership")}},ef=async()=>{X("Update functionality is not available yet.")},em=e=>{let i=F.indexOf(e),r=[];N(-1===i?[...F,e]:F.filter(i=>i!==e))},eg=e=>-1!==F.indexOf(e),eb=e=>{O(e),z(!1),console.log("Edit clicked for dealership ID:",e)},ej=()=>{z(!1),O(null),L({name:"",description:"",image:null}),X(null),Z(!1),console.log("Edit form closed")},eA=e=>{V(e),K(!0)},ek=async()=>{if(Q)try{await el(Q).unwrap(),K(!1),V(null)}catch(e){alert(e?.data?.message||"Failed to delete dealership")}};return(0,t.jsxs)(d.A,{sx:{height:"300px",padding:"20px",backgroundColor:"#f2f2f2",borderRadius:"8px",position:"relative",backgroundImage:'url("/bacground.jpg")',backgroundRepeat:"no-repeat",backgroundSize:"100% 300px",backgroundPosition:"top"},children:[(0,t.jsx)(o(),{id:"c7f37cfc29c28338",children:".shimmer{background:#f6f7f8;background-image:-webkit-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-moz-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-o-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:linear-gradient(to right,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;-webkit-background-size:800px 104px;-moz-background-size:800px 104px;-o-background-size:800px 104px;background-size:800px 104px;-webkit-animation:shimmer 1.5s infinite linear;-moz-animation:shimmer 1.5s infinite linear;-o-animation:shimmer 1.5s infinite linear;animation:shimmer 1.5s infinite linear}@-webkit-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-moz-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-o-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}"}),(0,t.jsx)(d.A,{children:(0,t.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"10px"},children:[(0,t.jsx)(c.A,{variant:"h5",sx:{fontWeight:"bold",color:"rgba(32, 34, 36, 1)",fontSize:"32px"},children:"Auto Dealership"}),(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(p.A,{variant:"contained",color:"primary",onClick:()=>D(!0),sx:{mr:1,backgroundColor:"#2d98a6",color:"#fff"},children:[(0,t.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},className:"jsx-c7f37cfc29c28338",children:(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-c7f37cfc29c28338",children:[(0,t.jsx)("path",{d:"M5 12H19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"}),(0,t.jsx)("path",{d:"M12 5V19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"})]})}),(0,t.jsx)("span",{style:{fontSize:"16px",color:"rgba(255, 255, 255, 1)",font:"Nunito Sans"},className:"jsx-c7f37cfc29c28338",children:"Add new dealership"})]}),F.length>0&&(0,t.jsx)(x.A,{onClick:()=>{console.log("Delete dealerships with IDs:",F),N([])},sx:{color:"#fff"},children:(0,t.jsx)(C.A,{})})]})]})}),(0,t.jsx)(d.A,{sx:{display:"flex",justifyContent:"center"},children:(0,t.jsx)(d.A,{sx:{width:"100%",maxHeight:"700px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",backgroundColor:"#fff",marginTop:"10px"},children:(0,t.jsx)(d.A,{sx:{overflowX:"auto",maxHeight:"700px",overflowY:"auto"},children:(0,t.jsxs)(h.A,{sx:{minWidth:"800px"},children:[(0,t.jsx)(u.A,{children:(0,t.jsxs)(a.A,{sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0"},children:[(0,t.jsx)(l.A,{padding:"checkbox",children:(0,t.jsx)(f.A,{indeterminate:F.length>0&&F.length<ep.length,checked:ep.length>0&&F.length===ep.length,onChange:e=>{if(e.target.checked)return void N(ep.map(e=>e._id));N([])}})}),(0,t.jsx)(l.A,{sx:{width:"60px",fontWeight:"bold"},children:"Image"}),(0,t.jsx)(l.A,{sx:{fontWeight:"bold"},children:"Description"}),(0,t.jsx)(l.A,{sx:{width:"120px",fontWeight:"bold"},children:"Operations"})]})}),(0,t.jsx)(m.A,{children:ei||es?Array.from({length:5},(e,i)=>(0,t.jsxs)(a.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:[(0,t.jsx)(l.A,{padding:"checkbox",children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"20px",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(l.A,{sx:{width:"60px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"40px",height:"40px",borderRadius:"4px"}})}),(0,t.jsx)(l.A,{sx:{width:"120px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(l.A,{children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(l.A,{sx:{width:"120px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80px",height:"20px",borderRadius:"4px"}})})]},i)):er?(0,t.jsx)(a.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,t.jsxs)(l.A,{colSpan:5,align:"center",children:["Failed to load dealerships: ",JSON.stringify(er)]})}):0===ep.length?(0,t.jsx)(a.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,t.jsx)(l.A,{colSpan:5,align:"center",children:"No dealerships found"})}):ep.map(e=>e.data.map(i=>(0,t.jsxs)(a.A,{selected:eg(e._id),sx:{borderBottom:"1px solid #e0e0e0","&:hover":{backgroundColor:"#f9f9f9"}},children:[(0,t.jsx)(l.A,{padding:"checkbox",children:(0,t.jsx)(f.A,{checked:eg(e._id),onChange:()=>em(e._id)})}),(0,t.jsx)(l.A,{sx:{width:"60px"},children:(0,t.jsx)("img",{src:i.image,alt:i.description,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"},className:"jsx-c7f37cfc29c28338"})}),(0,t.jsx)(l.A,{sx:{width:"250px"},children:i.description}),(0,t.jsxs)(l.A,{sx:{width:"120px"},children:[(0,t.jsx)(x.A,{onClick:()=>eb(i._id),children:(0,t.jsx)(c.A,{sx:{backgroundColor:"rgba(0, 182, 155, 0.2)",width:"56.78px",height:"27.37px",borderRadius:"4.5px",color:"#00B69B",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Edit"})}),(0,t.jsx)(x.A,{onClick:()=>eA(i._id),children:(0,t.jsx)(c.A,{sx:{backgroundColor:"rgba(249, 60, 101, 0.2)",width:"70.97px",height:"27.37px",borderRadius:"4.5px",color:"rgba(248, 0, 54, 1)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Delete"})})]})]},i._id)))})]})})})}),(0,t.jsxs)(g.A,{open:M,onClose:()=>D(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(b.A,{children:"Add New Dealership"}),(0,t.jsx)(j.A,{children:(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,t.jsx)(A.A,{label:"Name",name:"name",value:q.name,onChange:ex,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(A.A,{label:"Description",name:"description",value:q.description,onChange:ex,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(A.A,{label:"Image",name:"image",type:"file",onChange:ex,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),T&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:T})]})}),(0,t.jsxs)(k.A,{children:[(0,t.jsx)(p.A,{onClick:()=>D(!1),color:"secondary",children:"Cancel"}),(0,t.jsx)(p.A,{onClick:eu,color:"primary",variant:"contained",disabled:en,children:en?"Saving...":"Save"})]})]}),(0,t.jsxs)(g.A,{open:W,onClose:ej,maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(b.A,{children:"Edit Dealership"}),(0,t.jsx)(j.A,{children:(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,t.jsx)(A.A,{label:"Name",name:"name",value:G.name,onChange:eh,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(A.A,{label:"Description",name:"description",value:G.description,onChange:eh,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[E&&ep.find(e=>e._id===E)?.image&&!G.image&&(0,t.jsx)("img",{src:ep.find(e=>e._id===E).image,alt:G.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),G.image&&(0,t.jsx)("img",{src:URL.createObjectURL(G.image),alt:"New Image Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),(0,t.jsx)(A.A,{label:"Image",name:"image",type:"file",onChange:eh,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}})]}),H&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:H})]})}),(0,t.jsxs)(k.A,{children:[(0,t.jsx)(p.A,{onClick:ej,color:"secondary",children:"Cancel"}),(0,t.jsx)(p.A,{onClick:ef,color:"primary",variant:"contained",disabled:!0,children:"Update"})]})]}),(0,t.jsxs)(g.A,{open:J,onClose:()=>K(!1),children:[(0,t.jsx)(b.A,{children:"Confirm Delete"}),(0,t.jsxs)(j.A,{children:[(0,t.jsx)(v.A,{children:"Are you sure you want to delete this dealership? This action cannot be undone."}),ec&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:"Failed to delete dealership"})]}),(0,t.jsxs)(k.A,{children:[(0,t.jsx)(p.A,{onClick:()=>K(!1),color:"secondary",children:"Cancel"}),(0,t.jsx)(p.A,{onClick:ek,color:"error",variant:"contained",disabled:ed,children:ed?"Deleting...":"Delete"})]})]}),(Y||ed)&&(0,t.jsx)(_.A,{})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")}};var i=require("../../webpack-runtime.js");i.C(e);var r=e=>i(i.s=e),t=i.X(0,[447,278,658,484,947],()=>r(7057));module.exports=t})();