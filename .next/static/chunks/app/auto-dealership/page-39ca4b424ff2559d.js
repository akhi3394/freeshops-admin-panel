(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{425:(e,i,r)=>{"use strict";r.d(i,{d:()=>s});var o=r(2115);let s=(e,i)=>{let[r,s]=(0,o.useState)(e);return(0,o.useEffect)(()=>{let r=setTimeout(()=>{s(e)},i);return()=>{clearTimeout(r)}},[e,i]),r}},4387:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>I});var o=r(5155),s=r(9137),n=r.n(s),l=r(2115),t=r(8023),d=r(4263),a=r(4581),c=r(700),x=r(8534),h=r(3127),f=r(7976),p=r(6033),u=r(3613),m=r(9776),g=r(6278),b=r(4492),j=r(9927),A=r(3577),k=r(1977),C=r(6871),w=r(9505),v=r(5555),y=r(5695),S=r(3060),N=r(6521),F=r(425);let I=()=>{var e,i;let{searchTerm:r}=(0,v.useSearch)();console.log(r,"searchTerm");let s=(0,y.usePathname)(),[I,R]=(0,l.useState)(0),[D,W]=(0,l.useState)(10),[_,M]=(0,l.useState)([]),[O,z]=(0,l.useState)(!1),[E,B]=(0,l.useState)(!1),[L,P]=(0,l.useState)(null),[T,U]=(0,l.useState)({name:"",description:"",image:null}),[H,J]=(0,l.useState)({name:"",description:"",image:null}),[X,q]=(0,l.useState)(null),[Q,V]=(0,l.useState)(null),[Y,G]=(0,l.useState)(!1),[K,Z]=(0,l.useState)(null),[$,ee]=(0,l.useState)(!1),ei=(0,F.d)(r,500),{data:er,isLoading:eo,error:es,refetch:en,isFetching:el}=(0,S.Nn)({search:ei,page:I+1,limit:D},{refetchOnMountOrArgChange:!0}),[et,{isLoading:ed,error:ea}]=(0,S.QJ)(),[ec,{isLoading:ex,error:eh}]=(0,S._m)(),ef=(null==er?void 0:er.data)||[];null==er||null==(e=er.data)||e.totalDocs,console.log(ef,"dealerships"),(0,l.useEffect)(()=>()=>{R(0),M([])},[s]),(0,l.useEffect)(()=>{en()},[ei,en]),(0,l.useEffect)(()=>{if(L&&ef){let e=ef.find(e=>e._id===L);e&&(J({name:e.name||"",description:e.description||"",image:null}),ee(!1),B(!0),console.log("Dealership data fetched, opening Edit form"))}},[L,ef]);let ep=e=>{let{name:i,value:r,files:o}=e.target;"image"===i&&o?U({...T,image:o[0]}):U({...T,[i]:r})},eu=e=>{let{name:i,value:r,files:o}=e.target;"image"===i&&o?J({...H,image:o[0]}):J({...H,[i]:r})},em=async()=>{if(!T.name||!T.description||!T.image)return void q("All fields are required");try{await et({name:T.name,description:T.description,image:T.image}).unwrap(),z(!1),U({name:"",description:"",image:null}),q(null)}catch(i){var e;q((null==i||null==(e=i.data)?void 0:e.message)||"Failed to create dealership")}},eg=async()=>{V("Update functionality is not available yet.")},eb=e=>{let i=_.indexOf(e),r=[];M(-1===i?[..._,e]:_.filter(i=>i!==e))},ej=e=>-1!==_.indexOf(e),eA=e=>{P(e),B(!1),console.log("Edit clicked for dealership ID:",e)},ek=()=>{B(!1),P(null),J({name:"",description:"",image:null}),V(null),ee(!1),console.log("Edit form closed")},eC=e=>{Z(e),G(!0)},ew=async()=>{if(K)try{await ec(K).unwrap(),G(!1),Z(null)}catch(i){var e;alert((null==i||null==(e=i.data)?void 0:e.message)||"Failed to delete dealership")}};return(0,o.jsxs)(a.A,{sx:{height:"300px",padding:"20px",backgroundColor:"#f2f2f2",borderRadius:"8px",position:"relative",backgroundImage:'url("/bacground.jpg")',backgroundRepeat:"no-repeat",backgroundSize:"100% 300px",backgroundPosition:"top"},children:[(0,o.jsx)(n(),{id:"c7f37cfc29c28338",children:".shimmer{background:#f6f7f8;background-image:-webkit-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-moz-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-o-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:linear-gradient(to right,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;-webkit-background-size:800px 104px;-moz-background-size:800px 104px;-o-background-size:800px 104px;background-size:800px 104px;-webkit-animation:shimmer 1.5s infinite linear;-moz-animation:shimmer 1.5s infinite linear;-o-animation:shimmer 1.5s infinite linear;animation:shimmer 1.5s infinite linear}@-webkit-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-moz-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-o-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}"}),(0,o.jsx)(a.A,{children:(0,o.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"10px"},children:[(0,o.jsx)(c.A,{variant:"h5",sx:{fontWeight:"bold",color:"rgba(32, 34, 36, 1)",fontSize:"32px"},children:"Auto Dealership"}),(0,o.jsxs)(a.A,{children:[(0,o.jsxs)(x.A,{variant:"contained",color:"primary",onClick:()=>z(!0),sx:{mr:1,backgroundColor:"#2d98a6",color:"#fff"},children:[(0,o.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},className:"jsx-c7f37cfc29c28338",children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-c7f37cfc29c28338",children:[(0,o.jsx)("path",{d:"M5 12H19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"}),(0,o.jsx)("path",{d:"M12 5V19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"})]})}),(0,o.jsx)("span",{style:{fontSize:"16px",color:"rgba(255, 255, 255, 1)",font:"Nunito Sans"},className:"jsx-c7f37cfc29c28338",children:"Add new dealership"})]}),_.length>0&&(0,o.jsx)(h.A,{onClick:()=>{console.log("Delete dealerships with IDs:",_),M([])},sx:{color:"#fff"},children:(0,o.jsx)(w.A,{})})]})]})}),(0,o.jsx)(a.A,{sx:{display:"flex",justifyContent:"center"},children:(0,o.jsx)(a.A,{sx:{width:"100%",maxHeight:"700px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",backgroundColor:"#fff",marginTop:"10px"},children:(0,o.jsx)(a.A,{sx:{overflowX:"auto",maxHeight:"700px",overflowY:"auto"},children:(0,o.jsxs)(f.A,{sx:{minWidth:"800px"},children:[(0,o.jsx)(p.A,{children:(0,o.jsxs)(t.A,{sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0"},children:[(0,o.jsx)(d.A,{padding:"checkbox",children:(0,o.jsx)(u.A,{indeterminate:_.length>0&&_.length<ef.length,checked:ef.length>0&&_.length===ef.length,onChange:e=>{if(e.target.checked)return void M(ef.map(e=>e._id));M([])}})}),(0,o.jsx)(d.A,{sx:{width:"60px",fontWeight:"bold"},children:"Image"}),(0,o.jsx)(d.A,{sx:{fontWeight:"bold"},children:"Description"}),(0,o.jsx)(d.A,{sx:{width:"120px",fontWeight:"bold"},children:"Operations"})]})}),(0,o.jsx)(m.A,{children:eo||el?Array.from({length:5},(e,i)=>(0,o.jsxs)(t.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:[(0,o.jsx)(d.A,{padding:"checkbox",children:(0,o.jsx)(a.A,{className:"shimmer",sx:{width:"20px",height:"20px",borderRadius:"4px"}})}),(0,o.jsx)(d.A,{sx:{width:"60px"},children:(0,o.jsx)(a.A,{className:"shimmer",sx:{width:"40px",height:"40px",borderRadius:"4px"}})}),(0,o.jsx)(d.A,{sx:{width:"120px"},children:(0,o.jsx)(a.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,o.jsx)(d.A,{children:(0,o.jsx)(a.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,o.jsx)(d.A,{sx:{width:"120px"},children:(0,o.jsx)(a.A,{className:"shimmer",sx:{width:"80px",height:"20px",borderRadius:"4px"}})})]},i)):es?(0,o.jsx)(t.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,o.jsxs)(d.A,{colSpan:5,align:"center",children:["Failed to load dealerships: ",JSON.stringify(es)]})}):0===ef.length?(0,o.jsx)(t.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,o.jsx)(d.A,{colSpan:5,align:"center",children:"No dealerships found"})}):ef.map(e=>e.data.map(i=>(0,o.jsxs)(t.A,{selected:ej(e._id),sx:{borderBottom:"1px solid #e0e0e0","&:hover":{backgroundColor:"#f9f9f9"}},children:[(0,o.jsx)(d.A,{padding:"checkbox",children:(0,o.jsx)(u.A,{checked:ej(e._id),onChange:()=>eb(e._id)})}),(0,o.jsx)(d.A,{sx:{width:"60px"},children:(0,o.jsx)("img",{src:i.image,alt:i.description,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"},className:"jsx-c7f37cfc29c28338"})}),(0,o.jsx)(d.A,{sx:{width:"250px"},children:i.description}),(0,o.jsxs)(d.A,{sx:{width:"120px"},children:[(0,o.jsx)(h.A,{onClick:()=>eA(i._id),children:(0,o.jsx)(c.A,{sx:{backgroundColor:"rgba(0, 182, 155, 0.2)",width:"56.78px",height:"27.37px",borderRadius:"4.5px",color:"#00B69B",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Edit"})}),(0,o.jsx)(h.A,{onClick:()=>eC(i._id),children:(0,o.jsx)(c.A,{sx:{backgroundColor:"rgba(249, 60, 101, 0.2)",width:"70.97px",height:"27.37px",borderRadius:"4.5px",color:"rgba(248, 0, 54, 1)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Delete"})})]})]},i._id)))})]})})})}),(0,o.jsxs)(g.A,{open:O,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(b.A,{children:"Add New Dealership"}),(0,o.jsx)(j.A,{children:(0,o.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,o.jsx)(A.A,{label:"Name",name:"name",value:T.name,onChange:ep,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,o.jsx)(A.A,{label:"Description",name:"description",value:T.description,onChange:ep,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,o.jsx)(A.A,{label:"Image",name:"image",type:"file",onChange:ep,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),X&&(0,o.jsx)(c.A,{color:"error",sx:{mt:1},children:X})]})}),(0,o.jsxs)(k.A,{children:[(0,o.jsx)(x.A,{onClick:()=>z(!1),color:"secondary",children:"Cancel"}),(0,o.jsx)(x.A,{onClick:em,color:"primary",variant:"contained",disabled:ed,children:ed?"Saving...":"Save"})]})]}),(0,o.jsxs)(g.A,{open:E,onClose:ek,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(b.A,{children:"Edit Dealership"}),(0,o.jsx)(j.A,{children:(0,o.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,o.jsx)(A.A,{label:"Name",name:"name",value:H.name,onChange:eu,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,o.jsx)(A.A,{label:"Description",name:"description",value:H.description,onChange:eu,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,o.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[L&&(null==(i=ef.find(e=>e._id===L))?void 0:i.image)&&!H.image&&(0,o.jsx)("img",{src:ef.find(e=>e._id===L).image,alt:H.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),H.image&&(0,o.jsx)("img",{src:URL.createObjectURL(H.image),alt:"New Image Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),(0,o.jsx)(A.A,{label:"Image",name:"image",type:"file",onChange:eu,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}})]}),Q&&(0,o.jsx)(c.A,{color:"error",sx:{mt:1},children:Q})]})}),(0,o.jsxs)(k.A,{children:[(0,o.jsx)(x.A,{onClick:ek,color:"secondary",children:"Cancel"}),(0,o.jsx)(x.A,{onClick:eg,color:"primary",variant:"contained",disabled:!0,children:"Update"})]})]}),(0,o.jsxs)(g.A,{open:Y,onClose:()=>G(!1),children:[(0,o.jsx)(b.A,{children:"Confirm Delete"}),(0,o.jsxs)(j.A,{children:[(0,o.jsx)(C.A,{children:"Are you sure you want to delete this dealership? This action cannot be undone."}),eh&&(0,o.jsx)(c.A,{color:"error",sx:{mt:1},children:"Failed to delete dealership"})]}),(0,o.jsxs)(k.A,{children:[(0,o.jsx)(x.A,{onClick:()=>G(!1),color:"secondary",children:"Cancel"}),(0,o.jsx)(x.A,{onClick:ew,color:"error",variant:"contained",disabled:ex,children:ex?"Deleting...":"Delete"})]})]}),($||ex)&&(0,o.jsx)(N.A,{})]})}},6521:(e,i,r)=>{"use strict";r.d(i,{A:()=>l});var o=r(5155);r(2115);var s=r(4581),n=r(4426);let l=()=>(0,o.jsx)(s.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:1300},children:(0,o.jsx)(n.A,{sx:{color:"#FF5722"}})})},6574:(e,i,r)=>{Promise.resolve().then(r.bind(r,4387))}},e=>{var i=i=>e(e.s=i);e.O(0,[920,516,555,441,684,358],()=>i(6574)),_N_E=e.O()}]);