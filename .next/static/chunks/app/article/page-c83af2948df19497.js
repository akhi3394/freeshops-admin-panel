(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{425:(e,i,r)=>{"use strict";r.d(i,{d:()=>o});var t=r(2115);let o=(e,i)=>{let[r,o]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let r=setTimeout(()=>{o(e)},i);return()=>{clearTimeout(r)}},[e,i]),r}},6521:(e,i,r)=>{"use strict";r.d(i,{A:()=>n});var t=r(5155);r(2115);var o=r(4581),l=r(4426);let n=()=>(0,t.jsx)(o.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:1300},children:(0,t.jsx)(l.A,{sx:{color:"#FF5722"}})})},6623:(e,i,r)=>{Promise.resolve().then(r.bind(r,9692))},9692:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>N});var t=r(5155),o=r(9137),l=r.n(o),n=r(2115),s=r(8023),a=r(4263),d=r(4581),c=r(700),x=r(8534),h=r(3127),u=r(7976),f=r(6033),p=r(3613),g=r(9776),m=r(9384),b=r(6278),j=r(4492),A=r(9927),k=r(3577),C=r(1977),w=r(6871),v=r(9505),y=r(5555),S=r(5695),R=r(2514),F=r(6521),I=r(425);let N=()=>{var e,i,r;let{searchTerm:o}=(0,y.useSearch)();console.log(o,"searchTerm");let N=(0,S.usePathname)(),[M,O]=(0,n.useState)(0),[P,W]=(0,n.useState)(10),[D,z]=(0,n.useState)([]),[E,T]=(0,n.useState)(!1),[_,B]=(0,n.useState)(!1),[L,U]=(0,n.useState)(null),[H,q]=(0,n.useState)({title:"",description:"",image:null}),[J,X]=(0,n.useState)({title:"",description:"",image:null}),[Q,V]=(0,n.useState)(null),[Y,G]=(0,n.useState)(null),[K,Z]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(null),[ei,er]=(0,n.useState)(!1),et=(0,I.d)(o,500),{data:eo,isLoading:el,error:en,refetch:es,isFetching:ea}=(0,R.vb)({search:et,page:M+1,limit:P},{refetchOnMountOrArgChange:!0}),[ed,{isLoading:ec,error:ex}]=(0,R.jd)(),[eh,{isLoading:eu,error:ef}]=(0,R.Uo)(),[ep,{isLoading:eg,error:em}]=(0,R.Qp)(),{data:eb,error:ej,isFetching:eA,refetch:ek}=(0,R.OT)(L,{skip:!L,refetchOnMountOrArgChange:!0}),eC=(null==eo||null==(e=eo.data)?void 0:e.docs)||[],ew=(null==eo||null==(i=eo.data)?void 0:i.totalDocs)||0;(0,n.useEffect)(()=>()=>{O(0),z([])},[N]),(0,n.useEffect)(()=>{es()},[o,es]),(0,n.useEffect)(()=>{if(eA)er(!0),console.log("Fetching article data...");else if(eb){var e,i;X({title:(null==eb||null==(e=eb.data)?void 0:e.title)||"",description:(null==eb||null==(i=eb.data)?void 0:i.description)||"",image:null}),er(!1),B(!0),console.log("Article data fetched, opening Edit form")}else ej&&(er(!1),console.log("Error fetching article:",ej))},[eA,eb,ej]);let ev=e=>{let{name:i,value:r,files:t}=e.target;"image"===i&&t?q({...H,image:t[0]}):q({...H,[i]:r})},ey=e=>{let{name:i,value:r,files:t}=e.target;"image"===i&&t?X({...J,image:t[0]}):X({...J,[i]:r})},eS=async()=>{if(!H.title||!H.description||!H.image)return void V("All fields are required");try{await ed({title:H.title,description:H.description,image:H.image}).unwrap(),T(!1),q({title:"",description:"",image:null}),V(null)}catch(i){var e;V((null==i||null==(e=i.data)?void 0:e.message)||"Failed to create article")}},eR=async()=>{if(!J.title||!J.description||!J.image)return void G("All fields are required");if(L)try{await eh({id:L,article:{title:J.title,description:J.description,image:J.image}}).unwrap(),B(!1),U(null),X({title:"",description:"",image:null}),G(null)}catch(i){var e;G((null==i||null==(e=i.data)?void 0:e.message)||"Failed to update article")}},eF=e=>{let i=D.indexOf(e),r=[];z(-1===i?[...D,e]:D.filter(i=>i!==e))},eI=e=>-1!==D.indexOf(e),eN=e=>{U(e),B(!1),ek(),console.log("Edit clicked for article ID:",e)},eM=()=>{B(!1),U(null),X({title:"",description:"",image:null}),G(null),er(!1),console.log("Edit form closed")},eO=e=>{ee(e),Z(!0)},eP=async()=>{if($)try{await ep($).unwrap(),Z(!1),ee(null)}catch(i){var e;alert((null==i||null==(e=i.data)?void 0:e.message)||"Failed to delete article")}};return(0,t.jsxs)(d.A,{sx:{height:"300px",padding:"20px",backgroundColor:"#f2f2f2",borderRadius:"8px",position:"relative",backgroundImage:'url("/bacground.jpg")',backgroundRepeat:"no-repeat",backgroundSize:"100% 300px",backgroundPosition:"top"},children:[(0,t.jsx)(l(),{id:"c7f37cfc29c28338",children:".shimmer{background:#f6f7f8;background-image:-webkit-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-moz-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:-o-linear-gradient(left,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-image:linear-gradient(to right,#f6f7f8 0%,#edeef1 20%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;-webkit-background-size:800px 104px;-moz-background-size:800px 104px;-o-background-size:800px 104px;background-size:800px 104px;-webkit-animation:shimmer 1.5s infinite linear;-moz-animation:shimmer 1.5s infinite linear;-o-animation:shimmer 1.5s infinite linear;animation:shimmer 1.5s infinite linear}@-webkit-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-moz-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@-o-keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}@keyframes shimmer{0%{background-position:-468px 0}100%{background-position:468px 0}}"}),(0,t.jsx)(d.A,{children:(0,t.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"10px"},children:[(0,t.jsx)(c.A,{variant:"h5",sx:{fontWeight:"bold",color:"rgba(32, 34, 36, 1)",fontSize:"32px"},children:"Article"}),(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(x.A,{variant:"contained",color:"primary",onClick:()=>T(!0),sx:{mr:1,backgroundColor:"#2d98a6",color:"#fff"},children:[(0,t.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},className:"jsx-c7f37cfc29c28338",children:(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-c7f37cfc29c28338",children:[(0,t.jsx)("path",{d:"M5 12H19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"}),(0,t.jsx)("path",{d:"M12 5V19",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-c7f37cfc29c28338"})]})}),(0,t.jsx)("span",{style:{fontSize:"16px",color:"rgba(255, 255, 255, 1)",font:"Nunito Sans"},className:"jsx-c7f37cfc29c28338",children:"Add new article"})]}),D.length>0&&(0,t.jsx)(h.A,{onClick:()=>{console.log("Delete articles with IDs:",D),z([])},sx:{color:"#fff"},children:(0,t.jsx)(v.A,{})})]})]})}),(0,t.jsx)(d.A,{sx:{display:"flex",justifyContent:"center"},children:(0,t.jsx)(d.A,{sx:{width:"100%",maxHeight:"700px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",backgroundColor:"#fff",marginTop:"10px"},children:(0,t.jsx)(d.A,{sx:{overflowX:"auto",maxHeight:"700px",overflowY:"auto"},children:(0,t.jsxs)(u.A,{sx:{minWidth:"800px"},children:[(0,t.jsx)(f.A,{children:(0,t.jsxs)(s.A,{sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0"},children:[(0,t.jsx)(a.A,{padding:"checkbox",children:(0,t.jsx)(p.A,{indeterminate:D.length>0&&D.length<eC.length,checked:eC.length>0&&D.length===eC.length,onChange:e=>{if(e.target.checked)return void z(eC.map(e=>e._id));z([])}})}),(0,t.jsx)(a.A,{sx:{width:"60px",fontWeight:"bold"},children:"Image"}),(0,t.jsx)(a.A,{sx:{width:"120px",fontWeight:"bold"},children:"Title"}),(0,t.jsx)(a.A,{sx:{fontWeight:"bold"},children:"Description"}),(0,t.jsx)(a.A,{sx:{width:"120px",fontWeight:"bold"},children:"Operations"})]})}),(0,t.jsx)(g.A,{children:el||ea?Array.from({length:5},(e,i)=>(0,t.jsxs)(s.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:[(0,t.jsx)(a.A,{padding:"checkbox",children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"20px",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(a.A,{sx:{width:"60px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"40px",height:"40px",borderRadius:"4px"}})}),(0,t.jsx)(a.A,{sx:{width:"120px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(a.A,{children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80%",height:"20px",borderRadius:"4px"}})}),(0,t.jsx)(a.A,{sx:{width:"120px"},children:(0,t.jsx)(d.A,{className:"shimmer",sx:{width:"80px",height:"20px",borderRadius:"4px"}})})]},i)):en?(0,t.jsx)(s.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,t.jsxs)(a.A,{colSpan:5,align:"center",children:["Failed to load articles: ",JSON.stringify(en)]})}):0===eC.length?(0,t.jsx)(s.A,{sx:{borderBottom:"1px solid #e0e0e0"},children:(0,t.jsx)(a.A,{colSpan:5,align:"center",children:"No articles found"})}):eC.map(e=>(0,t.jsxs)(s.A,{selected:eI(e._id),sx:{borderBottom:"1px solid #e0e0e0","&:hover":{backgroundColor:"#f9f9f9"}},children:[(0,t.jsx)(a.A,{padding:"checkbox",children:(0,t.jsx)(p.A,{checked:eI(e._id),onChange:()=>eF(e._id)})}),(0,t.jsx)(a.A,{sx:{width:"60px"},children:(0,t.jsx)("img",{src:e.image,alt:e.title,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"},className:"jsx-c7f37cfc29c28338"})}),(0,t.jsx)(a.A,{sx:{width:"120px"},children:e.title}),(0,t.jsx)(a.A,{sx:{width:"250px"},children:e.description}),(0,t.jsxs)(a.A,{sx:{width:"120px"},children:[(0,t.jsx)(h.A,{onClick:()=>eN(e._id),children:(0,t.jsx)(c.A,{sx:{backgroundColor:"rgba(0, 182, 155, 0.2)",width:"56.78px",height:"27.37px",borderRadius:"4.5px",color:"#00B69B",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Edit"})}),(0,t.jsx)(h.A,{onClick:()=>eO(e._id),children:(0,t.jsx)(c.A,{sx:{backgroundColor:"rgba(249, 60, 101, 0.2)",width:"70.97px",height:"27.37px",borderRadius:"4.5px",color:"rgba(248, 0, 54, 1)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700},children:"Delete"})})]})]},e._id))})]})})})}),(0,t.jsx)(d.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:(0,t.jsx)(m.A,{rowsPerPageOptions:[5,10,25],component:"div",count:ew,rowsPerPage:P,page:M,onPageChange:(e,i)=>{O(i)},onRowsPerPageChange:e=>{W(parseInt(e.target.value,10)),O(0)},labelRowsPerPage:"Rows per page:",sx:{"& .MuiTablePagination-toolbar":{backgroundColor:"#fff",borderRadius:"20px",padding:"0 10px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows":{fontSize:"14px",color:"#666"},"& .MuiTablePagination-actions":{marginLeft:"10px"},"& .MuiIconButton-root":{borderRadius:"50%",backgroundColor:"#f5f5f5",margin:"0 5px","&:hover":{backgroundColor:"#e0e0e0"}}}})}),(0,t.jsxs)(b.A,{open:E,onClose:()=>T(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(j.A,{children:"Add New Article"}),(0,t.jsx)(A.A,{children:(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,t.jsx)(k.A,{label:"Title",name:"title",value:H.title,onChange:ev,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(k.A,{label:"Description",name:"description",value:H.description,onChange:ev,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(k.A,{label:"Image",name:"image",type:"file",onChange:ev,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),Q&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:Q})]})}),(0,t.jsxs)(C.A,{children:[(0,t.jsx)(x.A,{onClick:()=>T(!1),color:"secondary",children:"Cancel"}),(0,t.jsx)(x.A,{onClick:eS,color:"primary",variant:"contained",disabled:ec,children:ec?"Saving...":"Save"})]})]}),(0,t.jsxs)(b.A,{open:_,onClose:eM,maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(j.A,{children:"Edit Article"}),(0,t.jsx)(A.A,{children:ej?(0,t.jsxs)(c.A,{color:"error",children:["Failed to load article: ",JSON.stringify(ej)]}):(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,t.jsx)(k.A,{label:"Title",name:"title",value:J.title,onChange:ey,fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsx)(k.A,{label:"Description",name:"description",value:J.description,onChange:ey,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}}),(0,t.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(null==eb||null==(r=eb.data)?void 0:r.image)&&!J.image&&(0,t.jsx)("img",{src:eb.data.image,alt:eb.data.title,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),J.image&&(0,t.jsx)("img",{src:URL.createObjectURL(J.image),alt:"New Image Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"},className:"jsx-c7f37cfc29c28338"}),(0,t.jsx)(k.A,{label:"Image",name:"image",type:"file",onChange:ey,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{borderColor:"#ccc"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#FF5722"}}}})]}),Y&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:Y})]})}),(0,t.jsxs)(C.A,{children:[(0,t.jsx)(x.A,{onClick:eM,color:"secondary",children:"Cancel"}),(0,t.jsx)(x.A,{onClick:eR,color:"primary",variant:"contained",disabled:eu,children:eu?"Updating...":"Update"})]})]}),(0,t.jsxs)(b.A,{open:K,onClose:()=>Z(!1),children:[(0,t.jsx)(j.A,{children:"Confirm Delete"}),(0,t.jsxs)(A.A,{children:[(0,t.jsx)(w.A,{children:"Are you sure you want to delete this article? This action cannot be undone."}),em&&(0,t.jsx)(c.A,{color:"error",sx:{mt:1},children:"Failed to delete article"})]}),(0,t.jsxs)(C.A,{children:[(0,t.jsx)(x.A,{onClick:()=>Z(!1),color:"secondary",children:"Cancel"}),(0,t.jsx)(x.A,{onClick:eP,color:"error",variant:"contained",disabled:eg,children:eg?"Deleting...":"Delete"})]})]}),(ei||eu||eg)&&(0,t.jsx)(F.A,{})]})}}},e=>{var i=i=>e(e.s=i);e.O(0,[920,516,384,555,441,684,358],()=>i(6623)),_N_E=e.O()}]);